baseurl="http://192.168.0.12/nalaq-download"
jarname="nalaq-all.jar"
script="install-languages.txt"
folder="$HOME/NaLaQ"

echo "Looking for java installation ..."
version=$(which java|java -version 2>&1|grep version)
if [ -z "$version" ]; then
    echo "No java executable found, please install a JVM"
    exit
fi
echo "Found java executable $version"

echo "Looking for previous NaLaQ installation ..."
if [ -d "$folder" ]; then
    echo "$folder already exists, updating installation ..."
elif [ -f "$folder" ]; then
    echo "$folder is an existing file, please delete or rename it"
    exit
else
    echo "Creating new folder $folder ..."
    result=$(mkdir "$folder" && echo yes || echo no)
    if [ "$result" = "yes" ]; then
        echo "Folder $folder created"
    else
        echo "Could not create $folder"
        exit
    fi
fi

echo "Downloading jar file ..."
jar="$baseurl/$jarname"
result=$(curl -sLfo "$folder/$jarname" "$jar" && echo yes || echo no)
if [ "$result" = "yes" ]; then
    echo "Jar file downloaded"
else
    echo "Could not download $jar"
    exit
fi

echo "Downloading languages script ..."
result=$(curl -sLfo "$folder/$script" "$baseurl/$script" && echo yes || echo no)
if [ "$result" = "yes" ]; then
    echo "Language script file downloaded"
else
    echo "Could not download $baseurl/$script"
    exit
fi

echo "NaLaQ installation completed"
echo "You can start the application with the following command:"
echo "   java -jar $folder/$jarname"
echo "Also see the file $folder/$script for installing languages files"
