<title>Supported audio formats</title>
<h1 style="text-align:center">Supported audio formats</h1>
<table border=5 cellspacing=1 cellpadding=2 align=center>
    <tr>
        <th>client</th>
        <th>server</th>
    </tr>
    <tr>
        <td valign="top" id="client"></td>
        <td valign="top" id="server"></td>
    </tr>
</table>
<script>
const audioFormats = "mp3,mp4,mpeg,wav,ogg,webm,x-aiff,basic.midi".split(",")
getClientFormats()
getServerFormats()

function getClientFormats() {
    var formats = []
    for (f in audioFormats) {
        var format = "audio/"+audioFormats[f]
        if (MediaRecorder.isTypeSupported(format))
            formats.push(format)
    }
    document.querySelector("#client").innerHTML = formats.join("<br>")
}

async function getServerFormats() {
    var formats = (await fetch("/api/audio", {
        method: 'POST',
        headers: {'Content-Type': 'application/json', 'Accept': 'application/json'},
        body: "null"
    }).then(r => r.json()).catch(e => alert(e)))
    document.querySelector("#server").innerHTML = formats.join("<br>")
}

</script>
